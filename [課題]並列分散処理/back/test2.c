#include <stdio.h>#include <stdlib.h>#include <time.h>/*! * @brief       配列にランダムな数値を格納する。 * @param[out]  array  数値格納先の配列 * @param[in]   size   配列のサイズ * @param[in]   digit  数値の桁数。 */static voidarray_random_number(int *array, unsigned int size, unsigned int digit){    int i;    /* 起動毎に異なる乱数を発生させる */    //srand((unsigned int)time(NULL));	srand(10);	for(i = 0; i < size; i++){        array[i]=rand() % digit;    }}/*! * @brief       配列内容を表示する * @param[in]   array  数値格納先の配列 * @param[in]   size   配列のサイズ */static voidarray_print(int *array, unsigned int size){    int i = 0;    for(i = 0; i < size; i++){        printf("%d ", array[i] );    }    putchar('\n');}#define DATA_SIZE 8 /* 整列対象のデータ数 */#define M    2      /* 分布数え上げのキー範囲：０〜１５ */#define MASK 1    /* 4bitを取り出すためのマスク *//*! * @brief          基数ソートを行う。 * @param[in/out]  array  整列する要素配列 * @param[in]      size   配列のサイズ */voidradix_sort(int *array, unsigned int size){    int i, bit;     int count[M];     unsigned int buf[DATA_SIZE];	for(bit = 4; bit >= 0; bit -= 1){ 	//for(bit = 0; bit > 32; bit += 1){         /* 度数分布を求める */		for(i = 0; i < M; ++i) count[i] = 0; 		array_print(array, size);		for(i = 0; i < size; ++i){ ++count[(array[i] >> bit) & MASK];printf("%d::\n", (array[i] >> bit) & MASK); }		//printf("%d:\n", count[1]);		array_print(count, M);		for(i = 1; i < M; ++i) count[i] += count[i-1]; 		array_print(count, M);		/* 度数分布に従ってデータを整列する */        for(i = size-1; i>=0; --i){			buf[--count[(array[i] >> bit) & MASK]] = array[i];		}        for(i=0; i<size; ++i) array[i] = buf[i];         printf("[%02d bit]:", bit); array_print(array, size);    } }intmain(void){    int data[DATA_SIZE];    array_random_number(data, sizeof(data)/4, 10);    printf("[before]:"); array_print(data, sizeof(data)/4);    radix_sort(data, sizeof(data)/4);    printf("[after] :"); array_print(data, sizeof(data)/4);    return(0);}